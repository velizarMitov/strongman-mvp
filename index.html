<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strongman –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üí™ STRONGMAN –ö–ê–õ–ö–£–õ–ê–¢–û–†</h1>
                <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ—Ü–µ–Ω—è–≤–∞–Ω–µ –Ω–∞ —Å—ä—Å—Ç–µ–∑–∞–Ω–∏—è</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- State 1: No Event -->
            <div id="state-no-event" class="state active">
                <div class="panel full-width">
                    <div class="panel-header">
                        <h2>‚ö° –ù–∞—á–∞–ª–æ</h2>
                    </div>
                    <div class="section">
                        <p class="info-text">–ù—è–º–∞ –∞–∫—Ç–∏–≤–Ω–æ —Å—ä–±–∏—Ç–∏–µ. –°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ –∑–∞ –¥–∞ –Ω–∞—á–Ω–µ—Ç–µ!</p>
                        <button class="btn-primary" onclick="showEventModal()">
                            ‚ûï –°–™–ó–î–ê–ô –ù–û–í–û –°–™–ë–ò–¢–ò–ï
                        </button>
                    </div>
                </div>
            </div>

            <!-- State 2: Event Active -->
            <div id="state-event-active" class="state" style="display: none;">
                <div class="panel left-panel">
                    <div class="panel-header">
                        <h2>‚ö° –°–™–ë–ò–¢–ò–ï</h2>
                    </div>

                    <!-- Event Info -->
                    <div class="event-info">
                        <div class="event-details">
                            <h3 id="currentEventName"></h3>
                            <p id="currentEventType"></p>
                        </div>
                    </div>

                    <!-- Participants Section -->
                    <div class="section">
                        <h3>üë• –£—á–∞—Å—Ç–Ω–∏—Ü–∏</h3>
                        <div class="participants-list" id="participantsList"></div>
                        <div class="button-group">
                            <button class="btn-primary" onclick="showAddParticipantModal()">
                                ‚ûï –î–û–ë–ê–í–ò –£–ß–ê–°–¢–ù–ò–ö
                            </button>
                            <button class="btn-secondary" onclick="showImportModal()">
                                üì§ –ò–ú–ü–û–†–¢–ò–†–ê–ô –û–¢ –§–ê–ô–õ
                            </button>
                        </div>
                    </div>

                    <!-- Change Event Button -->
                    <button class="btn-secondary" onclick="resetEvent()">–ù–æ–≤–æ —Å—ä–±–∏—Ç–∏–µ</button>
                </div>

                <!-- Right Panel - –ö–∞–ª–∫—É–ª–∞—Ç–æ—Ä -->
                <div class="panel right-panel">
                    <div class="panel-header">
                        <h2>üìä –†–ï–ó–£–õ–¢–ê–¢–ò –ò –ö–ê–õ–ö–£–õ–ê–¢–û–†</h2>
                    </div>

                    <!-- Input Section -->
                    <div class="calculator-section">
                        <h3>–í—ä–≤–µ–¥–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç</h3>
                        
                        <div class="form-group">
                            <label>–£—á–∞—Å—Ç–Ω–∏–∫:</label>
                            <select id="participantSelect" class="input-field">
                                <option value="">-- –ò–∑–±–µ—Ä–∏ —É—á–∞—Å—Ç–Ω–∏–∫ --</option>
                            </select>
                        </div>

                        <div class="form-group" id="distanceGroup" style="display: none;">
                            <label>–î–∏—Å—Ç–∞–Ω—Ü–∏—è (–º):</label>
                            <input type="number" id="distanceInput" class="input-field" placeholder="0" min="0" step="0.01">
                        </div>

                        <div class="form-group" id="repetitionsGroup" style="display: none;">
                            <label>–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è:</label>
                            <input type="number" id="repetitionsInput" class="input-field" placeholder="0" min="0">
                        </div>

                        <div class="form-group">
                            <label>–í—Ä–µ–º–µ (MM:SS.CC):</label>
                            <div class="time-input-wrapper">
                                <input type="number" id="minutesInput" class="time-input" placeholder="0" min="0" max="99">
                                <span class="time-separator">:</span>
                                <input type="number" id="secondsInput" class="time-input" placeholder="0" min="0" max="59">
                                <span class="time-separator">.</span>
                                <input type="number" id="centisInput" class="time-input" placeholder="0" min="0" max="99">
                            </div>
                        </div>

                        <button class="btn-primary" onclick="submitResult()">
                            ‚úÖ –†–ï–ì–ò–°–¢–†–ò–†–ê–ô –†–ï–ó–£–õ–¢–ê–¢
                        </button>
                    </div>

                    <!-- Results Table -->
                    <div class="calculator-section">
                        <h3>–†–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç —Ç–æ–≤–∞ —Å—ä–±–∏—Ç–∏–µ</h3>
                        <div class="results-table">
                            <div class="table-header">
                                <div class="col-rank">–ú—è—Å—Ç–æ</div>
                                <div class="col-name">–£—á–∞—Å—Ç–Ω–∏–∫</div>
                                <div class="col-result">–†–µ–∑—É–ª—Ç–∞—Ç</div>
                                <div class="col-points">–¢–æ—á–∫–∏</div>
                                <div class="col-action">–î–µ–π—Å—Ç–≤–∏–µ</div>
                            </div>
                            <div id="resultsBody"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Leaderboard (–≤–∏–¥–∏–º–∞ —Å–∞–º–æ –∫–æ–≥–∞—Ç–æ –∏–º–∞ —Å—ä–±–∏—Ç–∏–µ) -->
        <section class="leaderboard" id="leaderboardSection" style="display: none;">
            <div class="leaderboard-header">
                <h2>ü•á –ö–õ–ê–°–ò–†–ê–ù–ï</h2>
            </div>
            <div class="leaderboard-table">
                <div class="table-header">
                    <div class="col-position">–ü–æ–∑–∏—Ü–∏—è</div>
                    <div class="col-name">–£—á–∞—Å—Ç–Ω–∏–∫</div>
                    <div class="col-total-points">–û–ë–©–û –¢–û–ß–ö–ò</div>
                </div>
                <div id="leaderboardBody"></div>
            </div>
        </section>
    </div>

    <!-- Event Modal -->
    <div id="eventModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–æ–≤–æ —Å—ä–±–∏—Ç–∏–µ</h2>
                <button class="close-btn" onclick="closeEventModal()">&times;</button>
            </div>
            <form onsubmit="return handleCreateEvent(event);">
                <div class="modal-body">
                    <div class="form-group">
                        <label>–ò–º–µ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ:</label>
                        <input type="text" id="eventNameInput" class="input-field" placeholder="–Ω–∞–ø—Ä. Deadlift Championship" required>
                    </div>

                    <div class="form-group">
                        <label>–¢–∏–ø —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="eventType" value="distance" checked>
                                üìè –î–∏—Å—Ç–∞–Ω—Ü–∏—è + –í—Ä–µ–º–µ
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="eventType" value="reps">
                                üîÑ –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è + –í—Ä–µ–º–µ
                            </label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeEventModal()">–û—Ç–º–µ–Ω–∏</button>
                    <button type="submit" class="btn-primary">–°—ä–∑–¥–∞–π —Å—ä–±–∏—Ç–∏–µ</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Participant Modal -->
    <div id="participantModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏ —É—á–∞—Å—Ç–Ω–∏–∫</h2>
                <button class="close-btn" onclick="closeParticipantModal()">&times;</button>
            </div>
            <form onsubmit="return handleAddParticipant(event);">
                <div class="modal-body">
                    <div class="form-group">
                        <label>–ò–º–µ –Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞:</label>
                        <input type="text" id="participantNameInput" class="input-field" placeholder="–Ω–∞–ø—Ä. –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeParticipantModal()">–û—Ç–º–µ–Ω–∏</button>
                    <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Import Participants Modal -->
    <div id="importModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π —É—á–∞—Å—Ç–Ω–∏—Ü–∏</h2>
                <button class="close-btn" onclick="closeImportModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–ò–∑–±–µ—Ä–∏ —Ñ–∞–π–ª (CSV, TXT, –∏–ª–∏ Excel):</label>
                    <input type="file" id="importFileInput" class="input-field" accept=".csv,.txt,.xlsx,.xls,.json" />
                    <p class="info-text" style="margin-top: 10px; font-size: 0.9em;">
                        <strong>–ü–æ–¥–¥—ä—Ä–∂–∞–Ω–∏ —Ñ–æ—Ä–º–∞—Ç–∏:</strong><br>
                        ‚Ä¢ CSV: –∏–º–µ1,–∏–º–µ2,–∏–º–µ3<br>
                        ‚Ä¢ TXT: –µ–¥–∏–Ω —É—á–∞—Å—Ç–Ω–∏–∫ –Ω–∞ —Ä–µ–¥<br>
                        ‚Ä¢ JSON: {"participants": ["–∏–º–µ1", "–∏–º–µ2"]}<br>
                        ‚Ä¢ EXCEL: –∫–æ–ª–æ–Ω–∞ —Å –∏–º–µ–Ω–∞
                    </p>
                </div>
                <div class="form-group">
                    <label>–∏–ª–∏ –≤—ä–≤–µ–¥–∏ –∏–º–µ–Ω–∞ (–≤—Å—è–∫–æ –Ω–∞ –Ω–æ–≤ —Ä–µ–¥):</label>
                    <textarea id="importTextarea" class="input-field" placeholder="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤&#10;–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞&#10;–ü–µ—Ç—ä—Ä –ö—Ä—É—Å—Ç–µ–≤"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeImportModal()">–û—Ç–º–µ–Ω–∏</button>
                <button type="button" class="btn-primary" onclick="handleImportParticipants()">–ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
